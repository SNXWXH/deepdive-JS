# 📘 제14장: 전역 변수의 문제점

---

### 🔹 14.1 변수의 생명 주기

변수는 **선언에 의해 메모리 공간이 할당되고, 할당된 값을 사용할 수 있는 기간** 동안 생존한다.

이를 변수의 **생명 주기(lifecycle)**라고 한다.

- **지역 변수**: 함수 호출 시 생성되고, 함수 종료 시 소멸된다.
- **전역 변수**: 프로그램이 시작될 때 생성되어 종료 시까지 유지된다.

전역 변수는 생명 주기가 길기 때문에 **메모리 점유 시간도 길고, 관리가 어렵다.**

---

### 🔹 14.2 암묵적 전역

변수를 선언할 때 `var`, `let`, `const` 키워드를 생략하면,

해당 변수는 **전역 객체의 프로퍼티가 되어버린다.**

```jsx
function foo() {
  x = 10; // var, let, const 없음 → 암묵적 전역
}
foo();
console.log(x); // 10
```

- `x`는 선언되지 않았지만 전역으로 선언된 것처럼 동작한다.
- 이는 **의도하지 않은 전역 변수**를 만들게 되어 예측 불가능한 오류를 유발한다.

---

### 🔹 14.3 전역 변수의 문제점

전역 변수는 다음과 같은 여러 문제를 초래한다:

### 1. **암묵적 결합**

전역 변수는 **모든 코드가 접근 가능한 공유 자원**이다.

이는 모듈 간 **강한 결합**을 초래하며, 코드의 독립성과 재사용성을 해친다.

```jsx
var count = 0;
function increment() {
  count++;
}
```

어디서든 `count`를 수정할 수 있으므로, 의도하지 않은 상태 변경이 발생할 수 있다.

### 2. **네임스페이스 오염**

자바스크립트는 하나의 전역 객체를 공유한다.

전역 변수나 전역 함수가 많아지면 **이름 충돌**이 발생할 수 있다.

```jsx
var name = "global";
function name() {} // 식별자 중복 가능
```

전역 공간을 오염시키면 **라이브러리 간 충돌이나 버그**의 원인이 된다.

### 3. **의도치 않은 재할당**

전역 변수는 모든 스코프에서 접근 가능하기 때문에

실수로 값을 덮어쓰거나 변경할 위험이 크다.

```jsx
var total = 100;

function reset() {
  total = 0; // 다른 함수에서 전역 변수 변경
}
```

---

### 🔹 14.4 전역 변수의 사용을 억제하는 방법

자바스크립트에서 전역 변수는 완전히 없애기 어렵지만,

**그 사용을 최소화하거나 간접적으로 사용할 수 있는 방법**들이 존재한다.

### 1. **즉시 실행 함수(IIFE)를 활용한 지역 스코프 생성**

```jsx
(function () {
  var foo = "local";
  console.log(foo);
})();
```

- IIFE 내부의 변수는 외부에서 접근할 수 없는 **지역 변수**가 된다.
- 전역 스코프를 오염시키지 않고 코드를 격리시킬 수 있다.

### 2. **네임스페이스 객체 사용**

```jsx
var MyApp = {};
MyApp.value = 10;
MyApp.increment = function () {
  MyApp.value++;
};
```

- 모든 전역 변수/함수를 하나의 객체에 모아두면 전역 공간의 **식별자 수를 줄일 수 있다.**

### 3. **모듈 시스템 사용 (ES6 Modules)**

```jsx
// module.js
export const x = 10;

// main.js
import { x } from "./module.js";
```

- 모듈 시스템을 사용하면 **파일 단위로 스코프가 격리**되며,
  **전역 변수 없이도 필요한 값을 가져다 사용할 수 있다.**

---

## ✅ 정리 요약

| 항목               | 설명                                                                           |
| ------------------ | ------------------------------------------------------------------------------ |
| 변수 생명 주기     | 전역 변수는 전체 프로그램 실행 시간 동안 존재한다.                             |
| 암묵적 전역        | 선언 키워드 없이 변수를 사용하면 전역 객체에 등록된다.                         |
| 전역 변수의 위험성 | 암묵적 결합, 네임스페이스 오염, 의도치 않은 재할당 등의 문제가 있다.           |
| 억제 방법          | IIFE, 네임스페이스 객체, 모듈 시스템을 통해 전역 변수 사용을 최소화할 수 있다. |
