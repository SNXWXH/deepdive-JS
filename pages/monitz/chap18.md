# 📘 제18장: 함수와 일급 객체

---

### 🔹 18.1 일급 객체란?

프로그래밍 언어에서 **함수가 값처럼 자유롭게 사용될 수 있는 경우**,

그 함수는 **일급 객체(first-class object)**라고 불린다.

**일급 객체의 조건**은 다음과 같다:

1. 변수에 할당할 수 있어야 한다.
2. 함수의 인자로 전달할 수 있어야 한다.
3. 함수의 반환값으로 사용할 수 있어야 한다.

자바스크립트는 함수를 **일급 객체로 취급하는 언어**이다.

---

### 🔹 18.2 함수는 값이다

자바스크립트에서 함수는 객체이다.

정확히 말하면 **Function 객체**이며, 다른 값처럼 **변수에 할당되거나, 인자로 전달되거나, 반환될 수 있는 값**이다.

```jsx
const sayHi = function () {
  console.log("Hi");
};
sayHi(); // Hi
```

- 함수 리터럴로 정의된 `function () { ... }`은 **평가 시 함수 객체를 생성**하고,
  이를 변수 `sayHi`에 할당한 것이다.
- 이처럼 함수는 **선언과 동시에 평가되고, 값처럼 취급**된다.

---

### 🔹 18.3 함수 리터럴로 함수 객체 생성

함수는 **함수 리터럴(function literal)**로 정의되며,

이때 자바스크립트 엔진은 **Function 객체를 생성**한다.

```jsx
function add(x, y) {
  return x + y;
}
```

위 예제는 다음과 같은 과정을 거친다:

1. `function` 키워드를 통해 리터럴을 선언
2. 함수 객체가 생성됨
3. 함수 이름 `add`가 해당 객체를 참조하도록 바인딩됨

---

### 🔹 18.4 함수는 객체다

함수는 일반 객체와 동일하게 **프로퍼티를 가질 수 있는 값**이다.

```jsx
function foo() {}
foo.prop = "value";
console.log(foo.prop); // 'value'
```

- 함수는 객체이기 때문에, 일반 객체처럼 프로퍼티를 추가할 수 있다.
- 함수 객체는 내부에 다음과 같은 **내부 프로퍼티(슬롯)**를 가진다:

| 내부 슬롯         | 설명                               |
| ----------------- | ---------------------------------- |
| `[[Environment]]` | 생성된 환경 정보 (스코프)          |
| `[[Call]]`        | 함수로 호출 가능함을 나타냄        |
| `[[Construct]]`   | new 연산자로 생성자 호출 가능 여부 |

---

### 🔹 18.5 함수는 일급 객체다

함수는 다음과 같은 방식으로 **일급 객체로서 활용**될 수 있다:

### ✅ 변수에 할당

```jsx
const multiply = function (x, y) {
  return x * y;
};
```

### ✅ 함수의 인자로 전달

```jsx
function callWithTwo(func) {
  return func(2);
}

function double(x) {
  return x * 2;
}

console.log(callWithTwo(double)); // 4
```

### ✅ 함수의 반환값으로 사용

```jsx
function makeAdder(x) {
  return function (y) {
    return x + y;
  };
}

const add10 = makeAdder(10);
console.log(add10(5)); // 15
```

- 위 예제는 **클로저의 예시**이기도 하며, 함수가 함수를 반환함으로써 **일급 객체 특성**을 보여준다.

---

### 🔹 18.6 함수 객체의 프로퍼티

모든 함수 객체는 다음과 같은 프로퍼티를 기본으로 가진다:

| 프로퍼티 | 설명                            |
| -------- | ------------------------------- |
| `name`   | 함수 이름                       |
| `length` | 정의된 매개변수(parameter)의 수 |

```jsx
function sum(a, b) {
  return a + b;
}

console.log(sum.name); // 'sum'
console.log(sum.length); // 2
```

---

### 🔹 18.7 기명 함수 표현식과 익명 함수 표현식

함수 표현식에는 **이름이 없는 익명 함수**와, **이름을 갖는 기명 함수**가 있다.

```jsx
// 익명 함수 표현식
const foo = function (x) {
  return x * x;
};

// 기명 함수 표현식
const bar = function square(x) {
  return x * x;
};
```

- 기명 함수 표현식은 **디버깅 시 스택 트레이스에 함수명이 표시되어 추적이 용이**하다는 장점이 있다.
- 함수명은 함수 내부에서만 참조할 수 있으며, 바깥에서는 사용할 수 없다.

---

### 🔹 18.8 고차 함수와 콜백 함수

함수를 인자로 받거나 반환하는 함수를 **고차 함수(high-order function)**라 하고,

그 전달되는 함수를 **콜백 함수(callback function)**라고 한다.

```jsx
function repeat(n, callback) {
  for (let i = 0; i < n; i++) {
    callback(i);
  }
}

repeat(3, console.log);
// 0
// 1
// 2
```

- 고차 함수는 **함수를 매개변수로 다루며, 추상화 수준을 높이고 유연한 코드 구성**을 가능하게 한다.

---

### 🔹 18.9 순수 함수와 비순수 함수

### ✅ 순수 함수 (Pure Function)

- 동일한 인자를 넣으면 항상 같은 결과를 반환한다.
- 외부 상태를 변경하지 않는다 (부작용이 없다).

```jsx
function add(a, b) {
  return a + b;
}
```

### ✅ 비순수 함수 (Impure Function)

- 외부 상태를 참조하거나 변경한다.
- 동일한 입력이라도 결과가 달라질 수 있다.

```jsx
let count = 0;

function increase() {
  return ++count;
}
```

순수 함수는 **예측 가능성과 테스트 용이성**을 높여 주며,

함수형 프로그래밍의 핵심 개념이다.

---

## ✅ 정리 요약

| 항목        | 설명                                              |
| ----------- | ------------------------------------------------- |
| 함수는 객체 | 함수는 객체이며, 프로퍼티를 가질 수 있다.         |
| 일급 객체   | 변수에 할당, 인자로 전달, 반환이 가능한 값이다.   |
| 함수 표현식 | 익명/기명 함수 표현식으로 선언 가능하다.          |
| 고차 함수   | 함수를 인자로 받거나 반환하는 함수이다.           |
| 콜백 함수   | 고차 함수에 인자로 전달된 함수이다.               |
| 순수 함수   | 외부 상태에 의존하지 않고 부작용이 없는 함수이다. |
| 비순수 함수 | 외부 상태를 변경하거나 의존하는 함수이다.         |
