# 📘 제15장: let, const와 블록 레벨 스코프

---

### 🔹 15.1 var 키워드로 선언한 변수의 문제점

ES5까지 변수는 `var` 키워드를 통해 선언되었다. 하지만 `var`는 다음과 같은 문제점을 지닌다:

### 1. **변수 중복 선언 허용**

```jsx
var x = 1;
var x = 100;
console.log(x); // 100
```

동일한 이름의 변수를 여러 번 선언해도 에러가 발생하지 않는다.

이는 실수로 인한 덮어쓰기를 유발하며, 예측하기 어려운 버그를 만든다.

### 2. **함수 레벨 스코프만 지원**

`var`는 **블록 레벨 스코프를 지원하지 않으며**, 함수 내부에서만 스코프를 갖는다.

```jsx
{
  var x = 10;
}
console.log(x); // 10
```

이처럼 `{}` 블록 내에서 선언된 변수도 바깥에서 접근할 수 있으므로

지역화가 어려워 코드의 안정성이 떨어진다.

### 3. **호이스팅에 의한 혼란**

`var`로 선언한 변수는 **선언이 스코프의 최상단으로 끌어올려지는 호이스팅**이 발생한다.

하지만 실제 할당은 원래 위치에서 수행되므로, **초기화되지 않은 상태의 변수에 접근할 수 있다.**

```jsx
console.log(x); // undefined
var x = 5;
```

이로 인해 코드의 흐름이 불명확하고, 오류 발생 가능성이 커진다.

---

### 🔹 15.2 let 키워드

ES6에서 도입된 `let` 키워드는 **블록 레벨 스코프**를 가지는 변수 선언 방식이다.

```jsx
let x = 1;
{
  let x = 2;
  console.log(x); // 2 (블록 내 변수)
}
console.log(x); // 1 (외부 변수)
```

### 특징

- **중복 선언 불가**
- **블록 레벨 스코프 지원**
- **TDZ(Temporal Dead Zone) 존재**
  - 선언 전 참조 시 ReferenceError가 발생한다.
  ```jsx
  console.log(foo); // ReferenceError
  let foo = 1;
  ```

`let`은 `var`보다 더 명확하고 안전한 변수 선언 방식이다.

---

### 🔹 15.3 const 키워드

`const`는 **재할당이 불가능한 상수를 선언**할 때 사용한다.

```jsx
const x = 1;
x = 2; // TypeError
```

### 특징

- **선언과 동시에 반드시 초기화해야 한다.**
- **재선언 및 재할당이 불가능하다.**
- **블록 레벨 스코프를 갖는다.**

```jsx
const user = { name: "Lee" };
user.name = "Kim"; // 가능 (객체 내용 변경은 가능)
user = {}; // 불가능 (참조 변경은 불가)
```

`const`는 객체의 **프로퍼티를 변경하는 것은 허용**하지만,

**참조값 자체를 변경하는 것은 허용하지 않는다.**

---

### 🔹 15.4 var, let, const의 비교

| 항목           | var                  | let          | const        |
| -------------- | -------------------- | ------------ | ------------ |
| 중복 선언      | 허용                 | 불가         | 불가         |
| 스코프         | 함수 레벨            | 블록 레벨    | 블록 레벨    |
| 호이스팅       | O (초기화 undefined) | O (TDZ 존재) | O (TDZ 존재) |
| 재할당         | 가능                 | 가능         | 불가         |
| 선언 시 초기화 | 선택                 | 선택         | **필수**     |

---

### 🔹 15.5 변수 선언의 권장 사항

변수 선언 시 다음의 규칙을 따르는 것이 바람직하다:

1. **변수는 const를 기본으로 사용하고, 재할당이 필요한 경우에만 let을 사용한다.**
2. **var는 사용하지 않는다.**
3. **스코프는 가능한 좁게 유지한다.**

이러한 규칙은 코드의 안정성과 유지보수성을 높이며,

예상치 못한 동작을 방지할 수 있는 안전한 코딩 스타일을 제공한다.

---

## ✅ 정리 요약

| 항목       | 설명                                                                     |
| ---------- | ------------------------------------------------------------------------ |
| var의 문제 | 중복 선언 허용, 블록 스코프 부재, 호이스팅으로 인한 혼란이 있다.         |
| let        | 블록 스코프, TDZ, 중복 선언 불가 등 명확한 변수 선언이 가능하다.         |
| const      | 재할당이 불가능한 상수 선언 용도로 사용하며 객체의 내용은 변경 가능하다. |
| 선언 기준  | const → let 순으로 사용하고, var는 지양해야 한다.                        |
