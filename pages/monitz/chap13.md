# chap13

## 📘 제13장: 스코프

---

### 🔹 13.1 스코프란?

- *스코프(scope)**란 **식별자(identifier)**가 유효한 범위, 즉 **변수나 함수에 접근할 수 있는 유효한 영역**을 의미한다.

자바스크립트는 **식별자를 통해 변수나 함수 등을 참조할 수 있는데**,

이때 식별자가 어디서부터 어디까지 참조 가능한지를 결정하는 규칙이 바로 스코프이다.

```jsx
javascript
복사편집
const x = 'global';

function foo() {
  const x = 'local';
  console.log(x);
}

foo(); // 'local'

```

위 예제에서 `x`는 전역 스코프와 함수 스코프 각각에서 다르게 선언되었으며,

함수 내부에서는 지역 변수 `x = 'local'`이 참조된다.

---

### 🔹 13.2 스코프의 종류

자바스크립트의 스코프는 **전역 스코프(global scope)**와

- *지역 스코프(local scope)**로 나뉜다.

### ✅ 전역 스코프

- 코드의 가장 바깥 영역에서 선언된 변수는 전역 스코프에 속한다.
- 어디서든 참조 가능하다.

```jsx
javascript
복사편집
const a = 1; // 전역 변수

```

### ✅ 지역 스코프

- 함수, 블록 등의 내부에서 선언된 변수는 그 내부에서만 참조 가능하다.

```jsx
javascript
복사편집
function bar() {
  const b = 2; // 지역 변수
  console.log(b);
}

```

스코프는 **중첩될 수 있으며**,

내부 스코프에서는 외부 스코프의 변수에 접근할 수 있다.

---

### 🔹 13.3 스코프 체인

스코프는 **중첩 구조**를 이루며,

식별자를 찾을 때 **자신의 스코프 → 외부 스코프 → 전역 스코프** 순으로 탐색한다.

이러한 탐색 구조를 **스코프 체인(scope chain)**이라고 한다.

```jsx
javascript
복사편집
const x = 1;

function outer() {
  const x = 10;
  function inner() {
    console.log(x);
  }
  inner();
}

outer(); // 10

```

- `inner` 함수 내부에는 `x`가 없기 때문에, 외부 스코프인 `outer` 함수 스코프에서 `x = 10`을 찾는다.

---

### 🔹 13.4 함수 레벨 스코프

`var` 키워드는 **블록 레벨 스코프를 따르지 않고**,

함수 내에서 선언되면 **함수 전체에 걸쳐 유효**하다. 이를 **함수 레벨 스코프**라고 한다.

```jsx
javascript
복사편집
{
  var x = 1;
}
console.log(x); // 1

```

위 코드에서 `x`는 블록 내부에서 선언되었지만, 블록을 벗어나도 접근 가능하다.

이는 `var`가 **블록 스코프를 무시하고 함수 스코프를 따르기 때문**이다.

이와 달리 `let`과 `const`는 **블록 레벨 스코프를 지원**한다.

```jsx
javascript
복사편집
{
  let y = 2;
}
console.log(y); // ReferenceError

```

---

### 🔹 13.5 렉시컬 스코프

자바스크립트는 **렉시컬 스코프(lexical scope)**를 따른다.

렉시컬 스코프란 **함수가 어디서 호출되었는지가 아니라, 어디서 정의되었는지에 따라 상위 스코프가 결정되는 방식**이다.

```jsx
javascript
복사편집
const msg = 'global';

function foo() {
  const msg = 'local';
  bar();
}

function bar() {
  console.log(msg);
}

foo(); // 'global'

```

위 코드에서 `bar`는 `foo` 내부에서 호출되었지만,

`bar` 함수의 상위 스코프는 **정의된 위치에 따라 전역 스코프**이다.

따라서 `msg = 'global'`이 출력된다.

- **렉시컬 환경은 함수 선언 시 결정되며, 호출 위치와는 무관하다.**
- 이는 **동적 스코프(dynamic scope)**와 반대되는 개념이다.

---

### 🔹 13.6 전역 객체와 전역 변수

전역 스코프에 선언한 변수는 **전역 객체(global object)**의 프로퍼티가 된다.

```jsx
javascript
복사편집
var x = 1;
console.log(window.x); // 1 (브라우저 환경)

```

그러나 `let`, `const`로 선언한 변수는 전역 객체의 프로퍼티가 되지 않는다.

```jsx
javascript
복사편집
let y = 2;
console.log(window.y); // undefined

```

- `var`는 전역 객체에 등록되어 **암묵적인 결합이 발생**하고,
- `let`과 `const`는 그렇지 않기 때문에 **보다 안전한 전역 관리가 가능**하다.

---

## ✅ 정리 요약

| 항목 | 설명 |
| --- | --- |
| 스코프 | 식별자가 유효한 범위이며, 변수나 함수에 접근 가능한 영역이다. |
| 전역/지역 | 전역 스코프는 어디서나 참조 가능하고, 지역 스코프는 선언된 내부에서만 유효하다. |
| 스코프 체인 | 내부에서 외부로 이어지는 스코프 탐색 구조이다. |
| 함수 레벨 스코프 | `var`는 블록을 무시하고 함수 단위로 스코프를 형성한다. |
| 렉시컬 스코프 | 함수 호출 위치가 아닌 정의 위치 기준으로 상위 스코프가 결정된다. |
| 전역 객체 | `var`로 선언된 전역 변수는 전역 객체의 프로퍼티가 되지만, `let`, `const`는 아니다. |